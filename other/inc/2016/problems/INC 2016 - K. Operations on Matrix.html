
<!-- saved from url=(0061)http://competition.binus.ac.id/contest/team/problem.php?id=31 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><title>INC 2016 - K. Operations on Matrix</title>

<style>
body, p, li, td {
	font-family: "Arial";
	font-size: 12pt;
	line-height: 1.5;
}
li {
	padding-bottom: 10px;
}
.norm{
	font-family: "Cambria Math";
	font-size: 13pt;
}
.block{
	display: block;
	margin-left: auto;
	margin-right: auto;	
}
</style>

</head><body><com:tcontent id="body">
<center>
<h3>ACM-ICPC Indonesia National Contest 2016</h3>
<h2>Problem K</h2>
<h1>Operations on Matrix</h1>
Time Limit: 1 second
</center>
<br>

<p></p>

<p>In this problem, you are given a matrix A of N x M (i.e. A[1 .. N][1 .. M]) and Q queries where each query is one of the following:</p>

<ul>
<li><font face="Courier New">rotate cw <i>r c s</i></font><br>Rotate the square submatrix A[r .. r+s][c .. c+s] clockwise.</li>
<li><font face="Courier New">rotate ccw <i>r c s</i></font><br>Rotate the square submatrix A[r .. r+s][c .. c+s] counterclockwise.</li>
<li><font face="Courier New">reflect x <i>r<sub>1</sub> c<sub>1</sub> r<sub>2</sub> c<sub>2</sub></i></font><br>Reflect the submatrix A[r<sub>1</sub> .. r<sub>2</sub>][c<sub>1</sub> .. c<sub>2</sub>] on x-axis.</li>
<li><font face="Courier New">reflect y <i>r<sub>1</sub> c<sub>1</sub> r<sub>2</sub> c<sub>2</sub></i></font><br>Reflect the submatrix A[r<sub>1</sub> .. r<sub>2</sub>][c<sub>1</sub> .. c<sub>2</sub>] on y-axis.</li>
</ul>

<p>For example, consider the following matrix of 4 x 5:</p>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-1.jpg">

<p>Supposed there are 4 queries, respectively:</p>

<ul>
<li><font face="Courier New">rotate cw 2 1 2</font><br>Rotate the square submatrix A[2 .. 2+2][1 .. 1+2], i.e. A[2 .. 4][1 .. 3] clockwise.<br><img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-rot-cw.jpg"></li>
<li><font face="Courier New">rotate ccw 1 4 1</font><br>Rotate the square submatrix A[1 .. 1+1][4 .. 4+1], i.e. A[1 .. 2][4 .. 5] clockwise.<br><img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-rot-ccw.jpg"></li>
<li><font face="Courier New">reflect x 2 2 3 5</font><br>Reflect the submatrix A[2 .. 3][2 .. 5] on x-axis.<br><img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-ref-x.jpg"></li>
<li><font face="Courier New">reflect y 2 3 4 5</font><br>Reflect the submatrix A[2 .. 4][3 .. 5] on y-axis.<br><img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-ref-y.jpg"></li>
</ul>

<p>Thus, after those queries, the final matrix becomes:</p>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="./INC 2016 - K. Operations on Matrix_files/inc16-k-matrix-2.jpg">

<p>Your task is to output the final matrix after all queries are executed sequentially.</p>


<br>

<h3>Input</h3>
<p>The first line of input contains an integer T (T &#8804; 100) denoting the number of cases. Each case begins with three integers N M and Q (1 &#8804; N, M &#8804; 20; 1 &#8804; Q &#8804; 20) denoting the matrix size (N x M) and number of queries, respectively. The next N lines, each contains M integers A<sub>i,j</sub> (1 &#8804; A<sub>i,j</sub> &#8804; 1,000) representing the intial matrix.
The next Q lines, each contains a query with one of the following format:
</p><ul>
<li><font face="Courier New">rotate cw <i>r c s</i></font> (1 &#8804; r &#8804; r+s &#8804; N; 1 &#8804; c &#8804; c+s &#8804; M)</li>
<li><font face="Courier New">rotate ccw <i>r c s</i></font>  (1 &#8804; r &#8804; r+s &#8804; N; 1 &#8804; c &#8804; c+s &#8804; M)</li>
<li><font face="Courier New">reflect x <i>r<sub>1</sub> c<sub>1</sub> r<sub>2</sub> c<sub>2</sub></i></font> (1 &#8804; r<sub>1</sub> &#8804; r<sub>2</sub> &#8804; N; 1 &#8804; c<sub>1</sub> &#8804; c<sub>2</sub> &#8804; M)</li>
<li><font face="Courier New">reflect y <i>r<sub>1</sub> c<sub>1</sub> r<sub>2</sub> c<sub>2</sub></i></font> (1 &#8804; r<sub>1</sub> &#8804; r<sub>2</sub> &#8804; N; 1 &#8804; c<sub>1</sub> &#8804; c<sub>2</sub> &#8804; M)</li>
</ul>
<p></p>


<h3>Output</h3>
<p>For each case, output in a line "<font face="Courier New">Case #X:</font>" where <font face="Courier New">X</font> is the case number, starts from 1. The next N lines in each case, each contains M integers each separated by a single space. These integers represent the final matrix after all queries are executed sequentially.</p>


<br><table border="0" cellspacing="0" cellpadding="0" bgcolor="#000000">
<tbody><tr><td align="center">
<table border="0" cellspacing="1" cellpadding="4" width="700">
<tbody><tr><th align="left" width="*" bgcolor="#FFFFFF">Sample Input</th><th align="left" width="250" bgcolor="#FFFFFF">Output for Sample Input</th></tr>
<tr valign="top"><td bgcolor="#FFFFFF">
<pre>2
4 5 4
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20
rotate cw 2 1 2
rotate ccw 1 4 1
reflect x 2 2 3 5
reflect y 2 3 4 5
3 3 2
10 10 10
1 3 9
20 15 17
reflect x 1 1 3 3
rotate cw 1 1 2
</pre>
</td><td bgcolor="#FFFFFF">
<pre>Case #1:
1 2 3 5 10
16 12 15 14 7
17 11 9 4 6
18 13 20 19 8
Case #2:
10 1 20
10 3 15
10 9 17
</pre>
</td></tr>
</tbody></table>
</td></tr>
</tbody></table>



<br><br>
</com:tcontent><script type="text/javascript">( function(){ window.SIG_EXT = {}; } )()</script></body></html>